<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>

    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="lib/angular-material/angular-material.css">

    <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
    <link href="css/ionic.app.css" rel="stylesheet">
    -->

    <!-- cordova script (this will be a 404 during development) -->
    <script src="cordova.js"></script>


    <!--bower : js-->
    <script src="lib/angular/angular.js"></script>
    <script src="lib/ngCordova/dist/ng-cordova.js"></script>

    <script src="lib/ngGeolocation/ngGeolocation.min.js"></script>


    <script src="lib/angular-ui-router/release/angular-ui-router.js"></script>

    <script src="lib/angular-aria/angular-aria.js"></script>

    <script src="lib/angular-material/angular-material.js"></script>

    <script src="lib/angular-animate/angular-animate.js"></script>

    <script src="lib/angular-google-maps/dist/angular-google-maps.js"></script>

    <script src="lib/angular-route/angular-route.js"></script>
    <script src="lib/angular-sanitize/angular-sanitize.js"></script>
    <script src="lib/lodash/dist/lodash.js"></script>
    <!--<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular-aria.min.js"></script>-->

    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.min.js"></script>
    <script src="lib/ionic/js/ionic-angular.min.js"></script>


    <!-- your app's js -->
    <script src="js/app.js"></script>

    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("button.get_more").click(function () {
                $.ajax({
                    dataType: "json",
                    url: "http://192.168.1.242:3000/get_more",
                    type: "GET",
                    success: function (result) {
                        var str;
                        for (i = 0; i < result.length; i++) {
                            str += result[i].title + "<br>";
                        }
                        $(".show").text(str);
                        alert(result.length);
                    },
                    error: function () {
                        alert("fail");
                    }
                });
            });
        });
    </script>
</head>

<body ng-app="starter">

<div ng-controller="MapCtrl">
    <!--<md-toolbar class="md-warn">-->
    <!--<div class="md-toolbar-tools">-->
    <!--<span class="md-flex">Map</span>-->
    <!--</div>-->

    <ion-header-bar class="bar bar-header bar-assertive">
        <button class="button button-icon ion-pinpoint get_more"></button>
        <h1 class="title">Map</h1>
    </ion-header-bar>
    <ion-content scroll="false" class="content">
        <div id="map_canvas" ng-controller="MapCtrl">
            <ui-gmap-google-map center="map.center" zoom="map.zoom" options="options">
                <ui-gmap-marker coords="marker.coords" options="marker.options" events="marker.events"
                                idkey="marker.id">
                    <ui-gmap-window isIconVisibleOnclick="true">
                        <p> {{marker.message}}</p>
                    </ui-gmap-window>
                </ui-gmap-marker>
                <ui-gmap-marker data-ng-repeat="marker in markerlist" coords="marker.coords"
                                icon="'img/marker-blue.svg'"> </ui-gmap-marker>
            </ui-gmap-google-map>

        </div>

        <md-button class="md-fab md-warn" ng-click="centerOnMe()" aria-label="Use Android"
                   style="margin-top: 85%;position: absolute;margin-left: 75%;">
            <md-icon md-svg-src="img/GPSsvg.svg"></md-icon>
        </md-button>
    </ion-content>

</div>

<!--<ion-view>-->
<!--<ion-header-bar class="bar bar-header bar-assertive">-->
<!--<h1 class="title">Map</h1>-->
<!--</ion-header-bar>-->
<!--<ion-content scroll="false" class="content">-->
<!--<div id="map_canvas" ng-controller="MapCtrl">-->
<!--<ui-gmap-google-map center="map.center" zoom="map.zoom" options="options"></ui-gmap-google-map>-->
<!--</div>-->
<!--</ion-content>-->
<!--<div class="bar bar-footer bar-assertive" style="position: fixed">-->
<!--<md-button class="md-raised md-primary" >Warn</md-button>-->
<!--</div>-->
<!--</ion-view>-->

</body>
</html>
